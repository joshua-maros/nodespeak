#include "DataType.h"

namespace Com {

////////////////////////////////////////////////////////////////////////////////
// Com::DataType
////////////////////////////////////////////////////////////////////////////////
DataType::DataType() { }

DataType *DataType::getBaseType() {
    return this;
}

bool DataType::isProxyType() {
    return false;
}

////////////////////////////////////////////////////////////////////////////////
// Com::IntDataType
////////////////////////////////////////////////////////////////////////////////
int IntDataType::getLength() {
    return 4;
}

////////////////////////////////////////////////////////////////////////////////
// Com::FloatDataType
////////////////////////////////////////////////////////////////////////////////
int FloatDataType::getLength() {
    return 4;
}

////////////////////////////////////////////////////////////////////////////////
// Com::BoolDataType
////////////////////////////////////////////////////////////////////////////////
int BoolDataType::getLength() {
    return 1;
}

////////////////////////////////////////////////////////////////////////////////
// Com::ArrayDataType
////////////////////////////////////////////////////////////////////////////////
ArrayDataType::ArrayDataType(DataType *elementType, int length)
    : elementType(elementType),
      length(length) { }

int ArrayDataType::getLength() {
    return elementType->getLength() * length;
}

DataType *ArrayDataType::getBaseType() {
    return elementType->getBaseType();
}

int ArrayDataType::getArrayLength() {
    return length;
}

DataType *ArrayDataType::getElementType() {
    return elementType;
}

////////////////////////////////////////////////////////////////////////////////
// Com::CopyArrayDataProxy
////////////////////////////////////////////////////////////////////////////////
CopyArrayDataProxy::CopyArrayDataProxy(DataType *sourceType, int length)
    : ArrayDataType(sourceType, length) { }

bool CopyArrayDataProxy::isProxy() {
    return true;
}

}
